<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact | Chris Mon Saji</title>
    <meta name="description" content="Contact Chris Mon Saji - Cyber Security Student & Full-Stack Developer">
    <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Preload optimized CSS for better performance -->
    <link rel="preload" href="assets/css/style-optimized.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="assets/css/style-optimized.min.css"></noscript>
    <!-- Resource hints for better performance -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="dns-prefetch" href="//i.ibb.co">
    <!-- No external Supabase script tag needed in head -->
</head>
<body>
    <div class="scanline-overlay"></div>
    
    <div class="layout-container">
        <!-- Left Navigation Column -->
        <nav class="vertical-nav">
            <div class="nav-profile">
                <div class="avatar-container">
                    <img src="https://i.ibb.co/XfnHJmS0/avatar.jpg" alt="Chris Mon Saji" class="avatar">
                    <div class="status-indicator online"></div>
                </div>
            </div>
            
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">
                    <svg class="nav-icon"><use href="#home-icon"></use></svg>
                    <span class="nav-label">Home</span>
                </a></li>
                <li><a href="about.html" class="nav-link">
                    <svg class="nav-icon"><use href="#about-icon"></use></svg>
                    <span class="nav-label">About</span>
                </a></li>
                <li><a href="resume.html" class="nav-link">
                    <svg class="nav-icon"><use href="#resume-icon"></use></svg>
                    <span class="nav-label">Resume</span>
                </a></li>
                <li><a href="portfolio.html" class="nav-link">
                    <svg class="nav-icon"><use href="#portfolio-icon"></use></svg>
                    <span class="nav-label">Portfolio</span>
                </a></li>
                <li><a href="testimonials.html" class="nav-link">
                    <svg class="nav-icon"><use href="#testimonials-icon"></use></svg>
                    <span class="nav-label">Testimonials</span>
                </a></li>
                <li><a href="contact.html" class="nav-link active" aria-current="page">
                    <svg class="nav-icon"><use href="#contact-icon"></use></svg>
                    <span class="nav-label">Contact</span>
                </a></li>
            </ul>
            
            <div class="nav-footer">
                <a href="assets/data/cv.pdf" class="download-btn" download>
                    <svg class="nav-icon"><use href="#download-icon"></use></svg>
                    <span class="nav-label">wget cv.pdf</span>
                </a>
                
                <div class="social-links">
                    <a href="https://discord.gg/SKY-TECHCRAFTS" target="_blank" aria-label="Discord">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M14.82 4.26a10.14 10.14 0 0 0-.53 1.1 14.66 14.66 0 0 0-4.58 0 10.14 10.14 0 0 0-.53-1.1 16 16 0 0 0-4.13 1.3 17.33 17.33 0 0 0-3 11.59 16.6 16.6 0 0 0 5.07 2.59A12.89 12.89 0 0 0 8.23 18a9.65 9.65 0 0 1-1.71-.83 3.39 3.39 0 0 0 .42-.33 11.66 11.66 0 0 0 10.12 0q.21.18.42.33a10.84 10.84 0 0 1-1.71.84 12.41 12.41 0 0 0 1.08 1.78 16.44 16.44 0 0 0 5.06-2.59 17.22 17.22 0 0 0-3-11.59 16.09 16.09 0 0 0-4.09-1.35zM8.68 14.81a1.94 1.94 0 0 1-1.8-2 1.93 1.93 0 0 1 1.8-2 1.93 1.93 0 0 1 1.8 2 1.93 1.93 0 0 1-1.8 2zm6.64 0a1.94 1.94 0 0 1-1.8-2 1.93 1.93 0 0 1 1.8-2 1.92 1.92 0 0 1 1.8 2 1.92 1.92 0 0 1-1.8 2z"/>
                        </svg>
                    </a>
                    <a href="https://github.com/chrizmonsaji" target="_blank" aria-label="GitHub">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
                        </svg>
                    </a>
                </div>
            </div>
        </nav>
        
        <!-- Main Content Area -->
        <main class="main-content">
            <section class="contact-section">
                <h1 class="section-title">CONTACT</h1>
                
                <div class="contact-content">
                    <div class="contact-info">
                        <h2>GET IN TOUCH</h2>
                        
                        <div class="contact-item">
                            <strong>mail:</strong> chrizmonsaji@gmail.com
                        </div>
                        
                        <div class="contact-item">
                            <strong>discord:</strong> @chriz__3656
                        </div>
                        
                        <div class="contact-item">
                            <strong>location:</strong> Online
                        </div>
                        
                        <div class="terminal-widget">
                            <div class="terminal-header">
                                <div class="terminal-controls">
                                    <span class="control-btn"></span>
                                    <span class="control-btn"></span>
                                    <span class="control-btn"></span>
                                </div>
                                <div class="terminal-title">system-status</div>
                            </div>
                            <div class="terminal-body">
                                <div class="terminal-line">> uptime</div>
                                <div class="terminal-line">24 days, 7:30 uptime</div>
                                <div class="terminal-line">> status</div>
                                <div class="terminal-line">online</div>
                                <div class="terminal-line">> projects</div>
                                <div class="terminal-line">5 active</div>
                            </div>
                        </div>
                    </div>
                    
                    <form class="contact-form" id="contactForm">
                        <h2>SEND MESSAGE</h2>
                        
                        <div class="form-group">
                            <label for="name">name</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">email</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        
                        <!-- Removed subject field -->
                        
                        <div class="form-group">
                            <label for="message">message</label>
                            <textarea id="message" name="message" rows="5" required></textarea>
                        </div>
                        
                        <button type="submit" class="submit-btn">
                            <svg><use href="#contact-icon"></use></svg>
                            enter
                        </button>
                        
                        <!-- Feedback container using styles from index.txt -->
                        <div id="formFeedback" style="margin-top: 15px;"></div>
                    </form>
                </div>
                
                <div class="contact-footer">
                    <p>Thanks for your patience â€” I'll get back to you as soon as possible!</p>
                </div>
            </section>
        </main>
    </div>
    
    <!-- SVG Icons Sprite -->
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
        <symbol id="home-icon" viewBox="0 0 24 24">
            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
        </symbol>
        <symbol id="about-icon" viewBox="0 0 24 24">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
        </symbol>
        <symbol id="resume-icon" viewBox="0 0 24 24">
            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
        </symbol>
        <symbol id="portfolio-icon" viewBox="0 0 24 24">
            <path d="M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11.5-6L8 14.5 9.5 16 12 13.5 14.5 16 16 14.5 13.5 12 16 9.5 14.5 8 12 10.5 9.5 8 8 9.5l2.5 2.5zM2 20v-4h2v4h4v2H4c-1.1 0-2-.9-2-2z"/>
        </symbol>
        <symbol id="testimonials-icon" viewBox="0 0 24 24">
            <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"/>
        </symbol>
        <symbol id="contact-icon" viewBox="0 0 24 24">
            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
        </symbol>
        <symbol id="download-icon" viewBox="0 0 24 24">
            <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
        </symbol>
        <symbol id="terminal-icon" viewBox="0 0 24 24">
            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 11.5V17h-2v-1.5H8v-2h2V12h2v1.5h2V15h-2v1.5zm4-5.5H8V7h8v2z"/>
        </symbol>
    </svg>

    <script src="assets/js/main-optimized.min.js"></script>
    <script>
        // --- Supabase Configuration and Contact Form Handling ---
        // Supabase credentials (Ensure these are kept secure in production!)
        const SUPABASE_URL = 'https://fzijfyqjrgpwvbsvgtcf.supabase.co'; // Your project URL
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ6aWpmeXFqcmdwd3Zic3ZndGNmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA4OTk2NjQsImV4cCI6MjA3NjQ3NTY2NH0.oWRCPA46ugAG4DfFW25gA-SrYbJNog0XuCvc8pSadNQ'; // Your anon key

        // Initialize Supabase client using UMD build URL
        // This fetches the Supabase library code dynamically and assigns it to 'window.supabase'
        (function() {
            if (window.supabase) {
                // If supabase is already loaded (e.g., by main.js or another script), use it
                setupContactForm(window.supabase);
            } else {
                // Otherwise, load the UMD build
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js';
                script.onload = function() {
                    // Once loaded, initialize the client and set up the form
                    const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                    setupContactForm(supabaseClient);
                };
                document.head.appendChild(script);
            }
        })();

        // Function to set up the form after Supabase client is ready
        function setupContactForm(supabaseClient) {
            const contactForm = document.getElementById('contactForm');
            const formFeedback = document.getElementById('formFeedback'); // Use the ID from this HTML

            if (!contactForm || !formFeedback) {
                console.error('Contact form or feedback element not found.');
                return;
            }

            // Function to show feedback message using styles from index.txt
            function showFeedback(message, isSuccess) {
                // Use classes from index.txt style (success-message, error-message)
                // Or create a similar element inline using the colors from :root
                // Option 1: Using inline styles matching index.txt's variables
                const bgColor = isSuccess ? 'var(--form-success)' : 'var(--form-error)'; // Assumes CSS variables are available
                const textColor = 'white'; // As per index.txt
                formFeedback.innerHTML = `<div class="feedback-message" style="padding: 10px; margin-top: 10px; border-radius: 5px; text-align: center; font-weight: bold; background-color: ${bgColor}; color: ${textColor};">${message}</div>`;

                // Option 2: If you add the index.txt classes to your CSS:
                // formFeedback.innerHTML = `<div class="feedback-message ${isSuccess ? 'success-message' : 'error-message'}">${message}</div>`;

                // Scroll to feedback
                formFeedback.scrollIntoView({ behavior: 'smooth' });
            }

            // Add event listener for form submission
            contactForm.addEventListener('submit', async function(e) {
                e.preventDefault(); // Prevent default form submission

                // Get form data (excluding 'subject' as per updated form and table)
                const formData = new FormData(contactForm);
                const name = formData.get('name');
                const email = formData.get('email');
                const message = formData.get('message');

                try {
                    // Insert data into the 'contact_messages' table (without 'subject')
                    const { data, error } = await supabaseClient
                        .from('contact_messages') // Ensure this matches your table name in Supabase
                        .insert([
                            { name: name, email: email, message: message } // Removed 'subject: subject'
                        ]);

                    if (error) {
                        console.error('Supabase Error:', error);
                        throw new Error(`Supabase error: ${error.message}`);
                    }

                    // Show success message
                    showFeedback('Thank you for your message! I will get back to you soon.', true);
                    contactForm.reset(); // Clear the form
                } catch (error) {
                    console.error('Form Submission Error:', error);
                    // Show error message
                    showFeedback('An error occurred while sending your message. Please try again.', false);
                }
            });
        }
        // --- END Supabase Integration ---
    </script>
</body>
</html>